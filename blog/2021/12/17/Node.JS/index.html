<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.17">
<link rel="alternate" type="application/rss+xml" href="/sev/blog/rss.xml" title="------🚀 RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sev/blog/atom.xml" title="------🚀 Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="------🚀" href="/sev/opensearch.xml"><title data-rh="true">Node.JS | ------🚀</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://kiyan-a.github.io/sev/blog/2021/12/17/Node.JS"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Node.JS | ------🚀"><meta data-rh="true" name="description" content="Node.js  是一个能够在服务端运行的 Javascript 运行环境，Node 大部分基本模块都用 Javascript 编写。运行在 Node.jS 中的 JS 的用途是操作磁盘文件或搭建HTTP服务器，NodeJS就相应提供了fs、http等内置对象。"><meta data-rh="true" property="og:description" content="Node.js  是一个能够在服务端运行的 Javascript 运行环境，Node 大部分基本模块都用 Javascript 编写。运行在 Node.jS 中的 JS 的用途是操作磁盘文件或搭建HTTP服务器，NodeJS就相应提供了fs、http等内置对象。"><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-12-17T00:00:00.000Z"><link data-rh="true" rel="icon" href="/sev/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kiyan-a.github.io/sev/blog/2021/12/17/Node.JS"><link data-rh="true" rel="alternate" href="https://kiyan-a.github.io/sev/blog/2021/12/17/Node.JS" hreflang="en"><link data-rh="true" rel="alternate" href="https://kiyan-a.github.io/sev/blog/2021/12/17/Node.JS" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://YKNSKCV7QA-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/sev/assets/css/styles.8f77875a.css">
<link rel="preload" href="/sev/assets/js/runtime~main.c439be92.js" as="script">
<link rel="preload" href="/sev/assets/js/main.8f1f353a.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sev/"><div class="navbar__logo"><img src="/sev/img/logo.svg" alt="Kiyan-a Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/sev/img/logo.svg" alt="Kiyan-a Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">Kiyan-a</b></a><a class="navbar__item navbar__link" href="/sev/docs/ES新特性">文档</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/sev/blog">博客</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Kiyan-a" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle_S7eR toggle_TdHA toggleDisabled_f9M3"><div class="toggleButton_rCf9" role="button" tabindex="-1"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></div><input type="checkbox" class="toggleScreenReader_g2nN" aria-label="Switch between dark and light mode (currently light mode)"></div><div class="searchBox_qEbK"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_a9qW thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_uKok margin-bottom--md">Recent posts</div><ul class="sidebarItemList_Kvuv"><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/sev/blog/for Js">for Js</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/sev/blog/npm run serve旅途风景">npm run serve 的旅途风景</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/sev/blog/tab-u组件">tab-u 组件</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/sev/blog/vue-jsonp">vue-jsonp</a></li><li class="sidebarItem_CF0Q"><a class="sidebarItemLink_miNk" href="/sev/blog/w-edit-u 组件">w-edit-u 组件</a></li></ul></nav></aside><main class="col col--7" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><header><h1 class="blogPostTitle_rzP5" itemprop="headline">Node.JS</h1><div class="blogPostData_Zg1s margin-vert--md"><time datetime="2021-12-17T00:00:00.000Z" itemprop="datePublished">December 17, 2021</time> · <!-- -->16 min read</div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>Node.js  是一个能够<strong>在服务端运行</strong>的 <strong>Javascript 运行环境</strong>，Node 大部分基本模块都用 Javascript 编写。运行在 Node.jS 中的 JS 的用途是<strong>操作磁盘文件</strong>或<strong>搭建HTTP服务器</strong>，NodeJS就相应提供了<code>fs</code>、<code>http</code>等内置对象。</p><p><strong>NodeJs 高性能 Web 服务器、JS、单线程、异步、V8引擎、硬件要求低</strong></p><p><em>V8引擎，目前速度最快的 JS引擎</em></p><p>🚕<em>奇数为测试版、偶数为稳定版</em></p><p>可以做什么???</p><ul><li>Web 服务器后台</li><li>命令行工具<ol><li>npm</li><li>git</li><li>hexo</li><li>......</li></ol></li><li>第三方模块( 自己写的少,主要使用别人开发的第三方库 )<ol><li>webpack</li><li>npm</li><li>gulp</li></ol></li></ul><p>🥞<strong>在 Node 中有一个全局对象 (global)，与浏览器全局对象 (window) 类似</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="模块化"><strong><a href="https://www.jianshu.com/p/fb96179c40bf" target="_blank" rel="noopener noreferrer">模块化</a></strong><a class="hash-link" href="#模块化" title="Direct link to heading">​</a></h3><p><strong>CommonJS、AMD、CMD、ES6模块化</strong></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="模块化优点"><strong>模块化优点：</strong><a class="hash-link" href="#模块化优点" title="Direct link to heading">​</a></h4><ol><li><strong>避免命名冲突</strong>，减少命名空间污染</li><li>更好的文件分离，<strong>按需加载</strong></li><li>更高的<strong>复用性</strong></li><li>更高的<strong>维护性</strong></li></ol><h4 class="anchor anchorWithStickyNavbar_mojV" id="commonjs-规范"><strong>CommonJS 规范</strong><a class="hash-link" href="#commonjs-规范" title="Direct link to heading">​</a></h4><p><strong>注意：🚄在 Node 中 , 每一个 js 文件中的代码都是独立运行在一个函数中的(函数包裹代码 IIEF) , 【不是全局作用域的】, 模块中的变量和函数在其它模块中是无法访问的</strong></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="require"><strong>require</strong><a class="hash-link" href="#require" title="Direct link to heading">​</a></h4><p><strong>模块引入</strong>：<strong>在 node 中</strong>,通过 <strong>require 函数来引入</strong>外部的模块</p><p>require() 引入的模块【返回的是一个对象】，这个对象代表的是引入的模块内容</p><p>注意：相对路径必须以 <strong>./  ../</strong>  开头</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="exports"><strong>exports</strong><a class="hash-link" href="#exports" title="Direct link to heading">​</a></h4><p><strong>模块导出：</strong>模块中向外部【暴露属性和方法 <strong>/</strong> 使用 exports 属性】</p><p><strong><code>exports.xxx=yyy</code></strong></p><p>缺点：<strong>加载模块是同步的</strong>，只有加载完后才能执行后面的操作；<strong>现加载现用</strong>，在服务器端编程，<strong>加载的模块一般存在本地硬盘里，加载起来比较快，不用考虑异步加载的问题，因为 CommonJS 规范比较适用。</strong>然后，并不适用于浏览器环境，同步意味着阻塞线程，浏览器资源的加载方式是异步的。</p><p><strong>模块的标识：</strong>使用 require() 引入外部模块时，使用的就是模块标识 require(&#x27;模块标识&#x27;)  ，可以通过模块标识来找到指定的模块。</p><p><strong>模块主要分两大类:</strong>核心模块<strong>：-由 node 引擎提供的模块，核心模块的标识就是模块的名字 require(&#x27;模块名&#x27;)</strong>文件模块**：由开发者创建的模块，文件模块的标识就是模块的相对路径 require(&#x27;相对路径&#x27;) </p><p>模块文件结构：当 Node 在执行代码时会自动用下面函数将内容包裹</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">exports</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> require</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> module</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> __filename</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> __dirname</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">文件内容</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>🍤注意：从这个函数可以看出，开发者使用的 exports , require , module .exports 都是这个函数提供的，在函数执行时传递进去的五个实参，而不是在全局中的，</p><p>exports：- 该对象用来将变量或函数暴露到外部</p><p>require：- 函数，用来引入外部的模块</p><p> module:- 代表的是模块本身，exports 实际上就是 module 的属性</p><p>__filename:- 当前模块的【完整路径】</p><p>__dirname:- 当前模块的所处的【文件夹名】</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="module">module<a class="hash-link" href="#module" title="Direct link to heading">​</a></h4><p>通过<code>module</code>对象可以访问到当前模块的一些相关信息，但最多的用途是替换当前模块的导出对象。例如模块导出对象默认是一个普通对象，如果想改成一个函数的话，可以使用以下方式。</p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">a</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">obj</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">a</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">--</span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> exports</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">引用数据类型在堆栈中的关系</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exports只能通过 </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token property-access">来暴露数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports既可以通过</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token property-access">的形暴露，也可以直接赋值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">错误🍳：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">exports</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">xxx</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yyy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">aaa</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">正确🍖：exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">xxx</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yyy 或者</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">xxx</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yyy</span><span class="token punctuation" style="color:#393A34">,</span><span class="token function" style="color:#d73a49">aaa</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> 或者</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">xxx</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">yyy</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><h4 class="anchor anchorWithStickyNavbar_mojV" id="包-package">包 package<a class="hash-link" href="#包-package" title="Direct link to heading">​</a></h4><p>Common.Js 的包规范允许<strong>将一组模块组合到一起，形成一组完整的工具。</strong></p><p>组成：<strong>包结构、包描述文件</strong></p><p>包结构：-用于组织包中的各种文件( 压缩文件，解压以后还原为目录 )</p><p>​		规范目录：</p><p>​					<strong>-package.js	-描述文件( 必须 )</strong></p><p>​					-bin				  -可执行二进制文件</p><p>​					-lib					-js 代码</p><p>​					-docc				-文档</p><p>​					-test				  -单元测试</p><p>包描述文件：-描述包的相关信息，以供外部读取分析</p><h4 class="anchor anchorWithStickyNavbar_mojV" id="node-包管理器-npm"><strong>Node 包管理器 npm</strong><a class="hash-link" href="#node-包管理器-npm" title="Direct link to heading">​</a></h4><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">npm </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">v </span><span class="token comment" style="color:#999988;font-style:italic">//查看版本号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm version </span><span class="token comment" style="color:#999988;font-style:italic">//查看所有依赖版本号</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm search 包名 </span><span class="token comment" style="color:#999988;font-style:italic">//搜索包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">i 包名 </span><span class="token comment" style="color:#999988;font-style:italic">//安装包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm remove</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">r 包名 </span><span class="token comment" style="color:#999988;font-style:italic">//删除包</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//安装包并添加到依赖中(package.json文件中),可以查看保证我们需要的包版本</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//现在7.7.6版本不需要提交 --save (自动添加)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install 包名 </span><span class="token operator" style="color:#393A34">--</span><span class="token plain">save </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">npm install 包名 </span><span class="token operator" style="color:#393A34">-</span><span class="token plain">g </span><span class="token comment" style="color:#999988;font-style:italic">//全局安装包(一般是一些工具)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>当把包提交到依赖中( package.json )</strong>,在安包时就不需要一个个去 install 安装,<strong>只需要 npm install 就可以</strong></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="模块初始化"><strong>模块初始化</strong><a class="hash-link" href="#模块初始化" title="Direct link to heading">​</a></h4><p><strong>注意🥩</strong>：一个模块中的 JS 代码仅在模块<strong>第一次被使用时执行一次</strong>，并在执行过程中初始化模块的导出对象。之后，<strong>缓存起来</strong>的导出对象被<strong>重复利用</strong>。</p><h3 class="anchor anchorWithStickyNavbar_mojV" id="buffer缓冲区"><strong>Buffer(缓冲区)</strong><a class="hash-link" href="#buffer缓冲区" title="Direct link to heading">​</a></h3><p>用户发送接收的数据(2进制)，在服务器端这里它存放在哪？？？ --- Buffer</p><p>在 Node.js中，定义了一个 Buffer 类，该类用来创建一个🍜<strong>专门存放二进制数据</strong>的缓存区。一个 Buffer <strong>类似于一个数组</strong>，但它对应于 V8 堆内存<strong>之外的一块原始内存。</strong>Buffer 库为 Node.js 带来了一种<strong>存储原始数据的方法</strong>。</p><p>注意🥫：在Unicode编码，<strong>存储时为二进制、显示时为十六机制(0x)、读取时为十进制(日常使用)</strong></p><p>目前使用<strong>new Buffer()构造函数</strong>来创建对象实例已废弃（Buffer对内存的权限操作相比很大，可以直接捕获一些敏感信息），目前官方文档里面<strong>建议使用Buffer.from()接口去创建Buffer对象</strong>。</p><p>Buffer.from(str)  代替 new Buffer(str) 将一个字符串保存到Buffer中</p><p>Buffer.alloc(10) 代替 new Buffer(10) 设置10个字节的Buffer</p><p>性能🍖：Buffer.alloc(清空再分配空间) &gt; Buffer.allocUnsafe(不会清空再分配空间，可能包含敏感数据)</p><p>Buffer 一旦大小确定，则不能修改，因为 Buffer 实际上是对底层的内存的直接操作</p><p>buffer.length   -占用内存的大小</p><p><strong>中文占3个字节(byte)内存</strong></p><p>buffer中每个元素的范围是从 00-ff(16进制)、  0-255(10进制)、  00000000- 11111111(2进制)</p><p><strong>只要数字在控制台或者页面输出都是一个 10进制 的数据( 自动转化 )</strong></p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> str </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;你好 node!&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> buffer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* 将一个字符串保存到Buffer中 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token maybe-class-name">Buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token keyword module" style="color:#00009f">from</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">str</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//8 -字符串的长度</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">buffer</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//12 -占用内存的大小</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 00000000 或 11111111</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 计算机 一个0 或 一个1 我们称为1位（bit）</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/* </span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    8bit=1byte(字节)</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    1024byte=1kb</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    1024kb=1mb</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    1024mb=1gb</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    1024gb=1tb</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">    🍕buffer 里的一个元素占用内存一个字节</span><br></span><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">*/</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>Buffer 实例与普通的 JavaScript 字符串之间进行<strong>相互转换 toString()</strong></p><h3 class="anchor anchorWithStickyNavbar_mojV" id="fs--文件系统-"><strong>fs ( 文件系统 )</strong><a class="hash-link" href="#fs--文件系统-" title="Direct link to heading">​</a></h3><p>服务器的本质就是将本地的文件发送给远程的客户端，<strong>通过 Node 来操作系统中的文件，Node通过fs 模块来和文件系统进行交互。</strong></p><p>fs 模块提供了一些标准文件访问的 API 来打开、读取、写入文件。</p><p>使用： <strong><code>const fs = require(&#x27;fs&#x27;)</code></strong></p><h4 class="anchor anchorWithStickyNavbar_mojV" id="同步和异步"><strong>同步和异步</strong><a class="hash-link" href="#同步和异步" title="Direct link to heading">​</a></h4><p>调用 fs 模块中所有的操作都<strong>有两种形式可供选择同步和异步。</strong></p><p>同步文件系统会<strong>阻塞</strong>程序的执行,也就是除非操作完毕,否则不会向下执行代码。</p><p>异步文件系统不会阻塞程序的执行,而是在操作完成时,通过回调函数将结果返回。 </p><p>区别：🛹</p><p><strong>同步：<em>const fd =</em> fs.方法名Sync ( path <!-- -->[, mode]<!-- --> )</strong></p><p><strong>异步：fs.方法名 ( path <!-- -->[, mode]<!-- --> , <em>callback</em>)</strong></p><p><strong>异步方法</strong>无需赋值给变量( <strong>无返回值</strong> )，通过回调函数的参数返回值</p><p>Sync :同步;	callbck:回调;</p><p><strong>性能：异步 &gt; 同步</strong></p><p>文件的写入:🚗</p><p>---手动操作的步骤</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="同步">同步<a class="hash-link" href="#同步" title="Direct link to heading">​</a></h5><p>​			1.打开文件</p><p>​			<strong>fs. openSync (path, flagsI, model)</strong></p><ul><li><p>path要打开文件的路径</p></li><li><p>flags打开文件要做的操作的类型</p><p>r只读的</p><p>w可写的</p></li><li><p>mode 设置文件的操作权限,一般不传</p></li><li><p>返回值：---该方法会返回一个文件的描述符作为结果,我们可以通过读描述符来对文件进行各种操作</p><p><strong>fs. openSync (&quot;path&quot;, &quot;w/r&quot;)</strong></p></li></ul><p>​			2.向文件中写入内容</p><p>​			<strong>fs.writeSync(fd, string[, position<!-- -->[, encoding]<!-- -->])</strong></p><ul><li><p>fd：文件的描述符</p></li><li><p>string：写入得到内容</p></li><li><p>position：初始位置</p></li><li><p>encoding：写入的编码,默认 utf-8</p></li><li><p>返回:  number 写入的字节数。</p><p><strong>fs.writeSync( fd , &#x27;内容&#x27;)</strong></p><p>注意🚒：<strong>此时如果不关闭文件，文件一直存在 内存 中得不到释放</strong></p></li></ul><p>​			3.保存并关闭文件</p><p>​			<strong>fs.closeSync( fd )</strong></p><ul><li>fd：文件的描述符</li></ul><h5 class="anchor anchorWithStickyNavbar_mojV" id="异步">异步<a class="hash-link" href="#异步" title="Direct link to heading">​</a></h5><p>​			1.打开文件</p><p>​			<strong>fs. open (path, flagsl, model, callback)</strong></p><p>​			-用来打开一个文件一异步调用的方法，结果都是通过回调函载			的参救返回的</p><p>​			-回调函数两个参数：</p><p>​					err 错误对象，如果<strong>没有错误则为null</strong></p><p>​					fd 文件的描述符 个</p><p>​			<strong>fs. open (path, flagsl, model, <em>functiom( fd , err ){}</em>)</strong></p><p>​			2.向文件中写入内容</p><p>​			<strong>fs.write(fd, string[, position<!-- -->[, encoding]<!-- -->], functiom( err ){})</strong></p><p>​			3.保存并关闭文件</p><p>​			<strong>fs.close( fd, functiom( err ){} )</strong></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="实用常用写入文件操作">实用(常用)写入文件操作<a class="hash-link" href="#实用常用写入文件操作" title="Direct link to heading">​</a></h5><p>上面两种方式的操作并不实用</p><p>异步：</p><p><strong>fs.writeFile(file, data<!-- -->[, {options}]<!-- -->, <em>callback</em>)</strong></p><p><img loading="lazy" src="/sev/assets/images/1-6628e97dff80aa2e44566819af483891.png" width="534" height="283"></p><p><strong>fs.writeFile(file, data, <em>{flag:&#x27;w&#x27;}</em>, <em>functiom( err ){}</em> )</strong></p><p>options配置： 常用 r 、 w 、 a <img loading="lazy" src="/sev/assets/images/2-d8a2e853a9c21a45f04f932d462fdb23.png" width="593" height="346"></p><p>知识点补充：当出现路径 C:\ 时，会报错误。解决方法：</p><p>1、使用 \ 转义：C:<!-- -->\<!-- -->\</p><p>2、使用 / : C:/</p><p>同步：</p><p><strong>fs.writeFileSync(file, data<!-- -->[, options]<!-- -->)</strong></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="流式文件写入">流式文件写入<a class="hash-link" href="#流式文件写入" title="Direct link to heading">​</a></h5><p><strong>可以持续写入</strong>(累加)</p><p>同步、异步或者简单文件写入( <strong>一次性写入</strong>，消耗<strong>性能大</strong>，容易导致<strong>内存溢出</strong> )都不适合操作大文件</p><p>使用：</p><p>--- 创建一个可写流( 接水管,往水缸放数据 )</p><p><strong>fs.createWriteStream(path<!-- -->[, options]<!-- -->)</strong></p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">//创建一个可写流</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ws </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createWriteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./public/test.txt&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 可以通过监听流的open和close事件来监听流的打开和关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;open&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;流式打开了&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;close&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;流式关闭了&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 往文件里添加数据,可以连续持续添加</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;1!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;2!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;3!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;4!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 关闭流</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ws.close();  ---尾部关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ws.end();  ---头部关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p>on(事件字符串,回调函数)-可以为对象绑定一个事件</p><p>once(事件字符串,回调函数)-可以为对象绑定一个一次性的事件，该事件将会在触发一次以后自动失效</p><p>关闭流</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="文件的读取">文件的读取<a class="hash-link" href="#文件的读取" title="Direct link to heading">​</a></h5><p><strong>fs.readFile 异步;	fs.readFileSync 同步;</strong>	---参数与写入类似</p><p>返回的是一个 <strong>Buffer 类型的数据</strong>，需要<strong>使用 toString() 转化</strong></p><p><strong>流式文件写入</strong></p><p><strong>fs.createReadStream(path<!-- -->[, options]<!-- -->)</strong></p><p>如果要读取一个可读流中的数据,<strong>必须要为可读流绑定一个data事件</strong>, data事件绑定完毕,它会<strong>自动开始读取数据</strong>,<strong>读取完毕就会自动关闭流</strong></p><div class="codeBlockContainer_I0IT language-js theme-code-block"><div class="codeBlockContent_wNvx js"><pre tabindex="0" class="prism-code language-js codeBlock_jd64 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">/* 流式文件的读写 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> fs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;fs&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//创建一个可读流</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> rs </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createReadStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;./public/#雄狮少年 18岁的他远走他乡，靠一人撑起整个家！再苦再累，他也没有放.mp4&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//创建一个可写流</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> ws </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> fs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">createWriteStream</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;./public/test.mp4&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 可以通过监听 可写流 的open和close事件来监听流的打开和关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;open&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;可写流打开了&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;close&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;可写流关闭了&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 可以通过监听 可读流 的open和close事件来监听流的打开和关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;open&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;可读流打开了&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//这里的close事件 可读流读取完毕会自动关闭，无需手动调用 end/close 关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">once</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;close&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;可读流关闭了&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 关闭可写流</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">end</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//当读取大文件不是一次性读取的，会一次读取xxx字节大小(累加)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">rs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">on</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;data&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// console.log(data);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 在这里进行写入文件操作</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ws</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">//  ### 不能在这里将可写流关闭，因为数据是一段一段读取的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ws.close();  ---尾部关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ws.end();  ---头部关闭</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_wuS7 clean-btn">Copy</button></div></div><p><strong>更加简单的方法</strong>：</p><h5 class="anchor anchorWithStickyNavbar_mojV" id="pipe"><strong>pipe()</strong><a class="hash-link" href="#pipe" title="Direct link to heading">​</a></h5><p><strong>pipe()可以将可读流中的内容，直接输出到可写流中</strong></p><p><strong><code>rs.pipe (ws) ;</code></strong></p><p>直接 pipe 无需再绑定 data 事件再写入，自动开启关闭读/写流</p><p><img loading="lazy" src="/sev/assets/images/3-97f72769950ced12aed21a76d085d731.png" width="825" height="337"></p><h5 class="anchor anchorWithStickyNavbar_mojV" id="其它操作">🧨其它操作<a class="hash-link" href="#其它操作" title="Direct link to heading">​</a></h5><p>fs.stat 检测是文件还是目录</p><p>fs.mkdir 创建目录</p><p>fs.writeFile 创建写入文件</p><p>fs.appendFile 追加文件</p><p>fs.readFile 读取文件</p><p>fs. readdir 读取目录</p><p>fs.unlink 删除文件</p><p>fs.rmdir(Sync) 删除目录</p><p>重命名文件和目录(剪切) fs.renmae</p><p>监视文件更改写入 fs.watchFile</p><p><a href="http://nodejs.cn/api/" target="_blank" rel="noopener noreferrer">http://nodejs.cn/api/</a></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/sev/blog/2022/03/19/自动按需导入组件"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">自动按需引入组件</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/sev/blog/2021/11/18/Vue"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Vue</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_cNA8 thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#模块化" class="table-of-contents__link toc-highlight"><strong>模块化</strong></a></li><li><a href="#buffer缓冲区" class="table-of-contents__link toc-highlight"><strong>Buffer(缓冲区)</strong></a></li><li><a href="#fs--文件系统-" class="table-of-contents__link toc-highlight"><strong>fs ( 文件系统 )</strong></a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sev/docs/ES新特性">教程</a></li></ul></div><div class="col footer__col"><div class="footer__title">社区</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Overflow<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://www.douyin.com/user/MS4wLjABAAAAmF7c2kPbvoPCA8B3lJMiGdnaBP92JohuCOfCHXPb6w0" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>抖音<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">更多的</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/sev/blog">博客</a></li><li class="footer__item"><a href="https://github.com/Kiyan-a" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Kiyan-a 版权所有 © 2022 创作不易请尊重他人劳动成果，未经授权禁止转载！.</div></div></div></footer></div>
<script src="/sev/assets/js/runtime~main.c439be92.js"></script>
<script src="/sev/assets/js/main.8f1f353a.js"></script>
</body>
</html>
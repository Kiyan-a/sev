---
slug: tab
title: tab-u
authors:
  name: 🚁_
  title: 不学习是没有前途的！
  url: https://www.douyin.com/user/MS4wLjABAAAAmF7c2kPbvoPCA8B3lJMiGdnaBP92JohuCOfCHXPb6w0?modal_id=7077180153360665860
  image_url: https://p3-pc-sign.douyinpic.com/aweme/100x100/aweme-avatar/tos-cn-avt-0015_f63df60109102f7997a23d73b5688d86.jpeg?x-expires=1652666400&x-signature=9NeEAE6P%2BG2RE9VnYawLR%2FZiNyE%3D&from=2480802190
tags: [组件化, 二次封装]
---

在后台管理系统开发中，接触最多的组件就是`表格组件`，tab-u 是基于`Element Table`重新封装的一套表格组件

![](https://raw.githubusercontent.com/Kiyan-a/For_picGo/img/202205141037866.png)

##### 安装：

```shell
npm i tab-u
```

##### 使用：

```js
// 在 main.js 下
/* 最不完美的地方🤨 全局引入 ElementUI 后续会进行优化 */
import ElementUI from 'element-ui';
import 'element-ui/lib/theme-chalk/index.css';
Vue.use(ElementUI);
/* 引入 tab-u 组件与样式 */
import TablePage from 'tab-u';
import 'tab-u/styles/TablePage-ui.css';
Vue.use(TablePage);
```

|         属性         |                                                             说明                                                              |       类型       | 默认值 |
| :------------------: | :---------------------------------------------------------------------------------------------------------------------------: | :--------------: | :----: |
|     getListData      |                                            用于获取数据，需要返回一个 Promise 对象                                            |     Function     |   -    |
|     searchConfig     |                                               搜索栏的字段配置,默认不展示搜索栏                                               | [Object,Boolean] | false  |
| searchConfig.inline  |                                                  是否在查询重置后面追加按钮                                                   |     Boolean      | false  |
| searchConfig.columns |                                                     搜索栏显示字段的配置                                                      |      Array       |   -    |
|       columns        |                                                        表格字段的配置                                                         |      Array       |   []   |
| columns:[{},{},...]  | 字段的详细配置( 继承 Element [¶](https://element.eleme.cn/#/zh-CN/component/table#table-column-attributes)Table-column 属性 ) |      Object      |   -    |
|       fieldKey       |                                              表格字段展示配置的保存(需要唯一值)                                               |      String      |   ’‘   |
|     isSelection      |                                                        是否展示多选框                                                         |     Boolean      | false  |
|        .....         |                                            其它属性继承了 Element Table Attributes                                            |                  |        |

```vue
<TablePage
  :getListData="getListData"
  :searchConfig="searchConfig"
  :columns="columns"
  fieldKey="only - b"
>
      <template #search-user="{ formModel, formItem }">
        <el-input-number v-model="formModel[formItem]"></el-input-number>
      </template>
      <template #search-status="{ formModel, formItem }">
        <el-date-picker
          v-model="formModel[formItem]"
          type="datetimerange"
          range-separator="至"
          start-placeholder="开始日期"
          end-placeholder="结束日期"
          align="right"
        >
        </el-date-picker>
      </template>
      <template #table-operate="{table}">
        <el-button type="primary" size="mini" @click="getData(table)">编辑</el-button>
        <el-button type="warning" size="mini">删除</el-button>
      </template>
 </TablePage>
```

**插槽：用于更换默认展示的搜索栏、表格内容**😁

|                           name                           |                                       说明                                       |
| :------------------------------------------------------: | :------------------------------------------------------------------------------: |
| #search-[搜索栏配置的 prop 值]="{ formModel, formItem }" |                             <template #search-city>                              |
|        #search-buttons="{ formModel, formItem }"         |                         在查询重置按钮后面添加的按钮插槽                         |
|         #table-[表格配置的 prop 值]="{ table }"          | 用于替换表格的默认展示内容，table 为解构赋值后的表格数据，table.row 为当前行数据 |

```js
export default {
  // components: { searchView, tableView, TablePage },
  components: { TablePage },
  data() {
    return {
      searchConfig: {
        inline: true,
        columns: [
          {
            label: '姓名',
            prop: 'name',
          },
          {
            label: '年龄',
            prop: 'age',
          },
          {
            label: '城市',
            prop: 'city',
          },
        ],
      },
      tableData: [
        {
          name: '余霞',
          age: '73',
          hobby: '本观六去半',
          city: '新疆维吾尔自治区 巴音郭楞蒙古自治州',
          phone: '18149951368',
          email: 'a.hnvlnmw@avhydowwk.cd',
        },
        {
          name: '乔强',
          age: '94',
          hobby: '心众山资引给',
          city: '江西省 上饶市',
          phone: '19812648578',
          email: 'f.ctpyufuk@lxbflzejj.sg',
        },
        {
          name: '曾丽',
          age: '30',
          hobby: '原起各传收了',
          city: '上海 上海市',
          phone: '18676572557',
          email: 'r.rdhuekkryc@jwvleuhug.za',
        },
        {
          name: '顾伟',
          age: '92',
          hobby: '程参决',
          city: '天津 天津市',
          phone: '18696661826',
          email: 'k.dapvoy@xngfex.edu',
        },
      ],
      columns: [
        { label: '姓名', prop: 'name', align: 'center' },
        { label: '城市', prop: 'city', align: 'center' },
        { label: '邮箱', prop: 'email', align: 'left', width: 200 },
      ],
    };
  },
  methods: {
    getData(table) {
      console.log(table);
    },
    /** 此处代码自行去体会优化
     * @method: 获取数据 --- tab-u 属性 getListData 的值
     * @param: { Object } query ...搜索的值,页码，页条数
     * @return: { Promise }
     */
    getListData(query) {
      let data = this.tableData;
      for (const item in query) {
        if (!['pageNum', 'pageSize'].includes(item)) {
          data = this.tableData.filter(i => i[item].includes(query[item]));
        }
      }
      let { pageNum, pageSize } = query;
      return Promise.resolve({
        //传递的数据
        list: data.slice(
          (pageNum - 1) * pageSize,
          pageSize + (pageNum - 1) * pageSize
        ),
        //数据的总数
        total: data.length,
      });
    },
  },
};
```

![](https://raw.githubusercontent.com/Kiyan-a/For_picGo/img/202205141036828.gif)

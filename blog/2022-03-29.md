---
  title: 自动按需引入组件
  authors:
    name: Kiyan-a
    title: 唔洗讲ye，哈哈哈哈哈！
    url: https://github.com/Kiyan-a
    image_url: https://avatars.githubusercontent.com/u/86712674?v=4
  tags: [自动化, 解放双手]
---

前言：使用`unplugin-vue-components`后，可以实现按需引入，而且也不用再使用`import`引入需要的组件，直接使用`<el-button>`等组件就可以。

支持的组件库：

- [Ant Design Vue](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/antdv.ts)
- [Arco Design Vue](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/arco.ts)
- [Element Plus](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/element-plus.ts)
- [Element UI](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/element-ui.ts)
- [Headless UI](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/headless-ui.ts)
- [IDux](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/idux.ts)
- [Inkline](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/inkline.ts)
- [Naive UI](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/naive-ui.ts)
- [Prime Vue](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/prime-vue.ts)
- [Vant](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/vant.ts)
- [VEUI](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/veui.ts)
- [Varlet UI](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/varlet-ui.ts)
- [View UI](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/view-ui.ts)
- [Vuetify](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/vuetify.ts)
- [VueUse Components](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/vueuse.ts)
- [Quasar](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/quasar.ts)
- [TDesign](https://github.com/antfu/unplugin-vue-components/blob/main/src/core/resolvers/tdesign.ts)

1、安装 npm 包

```ABAP
npm install unplugin-vue-components unplugin-auto-import -D
```

2、配置

```js
const AutoImport = require('unplugin-auto-import/webpack');
const Components = require('unplugin-vue-components/webpack');
const { ElementUiResolver } = require('unplugin-vue-components/resolvers');

module.exports = {
  configureWebpack: {
    plugins: [
      AutoImport({
        resolvers: [ElementUiResolver()],
      }),
      Components({
        resolvers: [ElementUiResolver()],
      }),
    ],
  },
};
```

3、具体使用

```html
<template>
  <div>
    <el-button>按钮</el-button>
  </div>
</template>
```

4、确认是否按需引入

首先，安装`webpack-bundle-analyzer`插件，

```ABAP
npm install  webpack-bundle-analyzer -D
```

然后执行以下命令：

```ABAP
npm run build --report
```

不用做任何配置，就可以看到终端打印出来打包后各文件大小。

如果想看详细的打包后文件的信息，可以在`vue.config.js`中做如下配置：

```js
const BundleAnalyzerPlugin =
  require('webpack-bundle-analyzer').BundleAnalyzerPlugin;

module.exports = {
  configureWebpack: {
    plugins: [new BundleAnalyzerPlugin()],
  },
};
```

完整引入时，打包后`chunk.js`文件大小为`400k`左右。按需引入后，打包后`chunk.js`文件大小为`200k`左右。

5、非 **template** 中使用组件

如果在 ts 文件中使用`ELMessage`等组件，仍需要手动引入，代码如下。

```js
import { ElMessage } from 'element-plus';
import 'element-plus/theme-chalk/el-message.css';
```
